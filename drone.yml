kind: pipeline
name: production
steps:
- name: java
  image: openjdk-8-alpine
  commands:
  - javac -d ./build -cp ./lib/*  ./src/tests/*.java -sourcepath ./src
  - cd build
  - jar cvf microrts.jar *
  - mv microrts.jar ../microrts.jar
  - cd ..
  - akp add zip
  - zip -r microrts.zip lib/ microrts.jar
# - name: upload
#   image: plugins/s3
#   volumes:
#   - name: cache
#     path: /tmp/cache
#   settings:
#     bucket: my-bucket-name
#     source: /tmp/cache/microrts.zip
#     target: /target/location
#     path_style: true
#     endpoint: http://dev.costa.sh:9000

# volumes:
# - name: cache
#   temp: {}